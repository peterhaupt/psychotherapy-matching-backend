# ===================================
# CURAVANI MASTER ENVIRONMENT TEMPLATE
# ===================================
# Copy this file to .env.dev, .env.test, or .env.prod and update with your values
# This file contains ALL possible environment variables across all services

# ===================================
# ENVIRONMENT & DEPLOYMENT SETTINGS
# ===================================

# Environment type (development|test|production)
FLASK_ENV=development

# Service environment suffix for Docker containers (""|-test|-prod)
SERVICE_ENV_SUFFIX=

# Flask debugging and application settings
FLASK_DEBUG=true
LOG_LEVEL=INFO

# ===================================
# DATABASE CONFIGURATION
# ===================================

# Primary database settings
DB_USER=your_db_user
DB_PASSWORD=your_secure_password # ⚠️ MANUAL ENTRY REQUIRED - Set your database password
DB_NAME=therapy_platform
DB_HOST=postgres
DB_PORT=5432

# External port mappings (host side ports)
DB_EXTERNAL_PORT=5432
PGBOUNCER_EXTERNAL_PORT=6432

# PgBouncer connection pooling
PGBOUNCER_HOST=pgbouncer
PGBOUNCER_PORT=6432
PGBOUNCER_ADMIN_USER=your_db_user
PGBOUNCER_ADMIN_PASSWORD=your_secure_password # ⚠️ MANUAL ENTRY REQUIRED - Set your PgBouncer password

# ===================================
# SERVICE PORTS
# ===================================
# Development: 8001-8005, Test: 8011-8015, Production: 8021-8025

PATIENT_SERVICE_PORT=8001
THERAPIST_SERVICE_PORT=8002
MATCHING_SERVICE_PORT=8003
COMMUNICATION_SERVICE_PORT=8004
GEOCODING_SERVICE_PORT=8005

# Internal Docker ports (fixed for all environments)
PATIENT_SERVICE_INTERNAL_PORT=8001
THERAPIST_SERVICE_INTERNAL_PORT=8002
MATCHING_SERVICE_INTERNAL_PORT=8003
COMMUNICATION_SERVICE_INTERNAL_PORT=8004
GEOCODING_SERVICE_INTERNAL_PORT=8005

# Service host binding (usually 0.0.0.0 for Docker)
SERVICE_HOST=0.0.0.0

# ===================================
# CORS CONFIGURATION
# ===================================

CORS_ALLOWED_ORIGINS=http://localhost:3000
CORS_SUPPORTS_CREDENTIALS=true

# ===================================
# EMAIL CONFIGURATION
# ===================================

# SMTP server settings
SMTP_HOST=host.docker.internal # Use host.docker.internal to access the host machine's SMTP server
SMTP_PORT=1025
SMTP_USERNAME=info@curavani.com
SMTP_PASSWORD=your_smtp_password # ⚠️ MANUAL ENTRY REQUIRED - Set your SMTP password
SMTP_USE_TLS=true

# Email sender information
EMAIL_SENDER=info@curavani.com
EMAIL_SENDER_NAME="Curavani GmbH"
EMAIL_ADD_LEGAL_FOOTER=true

# System notifications
SYSTEM_NOTIFICATION_EMAIL=info@curavani.com

# Communication service specific settings
COMMUNICATION_EMAIL_BATCH_LIMIT=10
COMMUNICATION_TIMEOUT_SHORT=5
COMMUNICATION_TIMEOUT_LONG=10
EMAIL_QUEUE_CHECK_INTERVAL_SECONDS=5
EMAIL_QUEUE_BATCH_SIZE=10
# for verification email sending
STORAGE_CHECK_INTERVAL_SECONDS=10

# ===================================
# COMPANY INFORMATION
# ===================================

COMPANY_NAME=Curavani GmbH
COMPANY_STREET=Jülicher Str. 72a
COMPANY_PLZ=52070
COMPANY_CITY=Aachen
COMPANY_COUNTRY=Deutschland
COMPANY_CEO=Peter Haupt
COMPANY_HRB=Amtsgericht Aachen, HRB 28791

# Legal footer configuration
LEGAL_FOOTER_PRIVACY_TEXT=Diese E-Mail kann vertrauliche Informationen enthalten. Falls Sie nicht der beabsichtigte Empfänger sind, benachrichtigen Sie bitte den Absender und löschen Sie diese E-Mail.

# ===================================
# GEOCODING SERVICE CONFIGURATION
# ===================================

# OpenStreetMap API settings
OSM_API_URL=https://nominatim.openstreetmap.org
OSM_USER_AGENT=TherapyPlatform/1.0
OSM_TIMEOUT=10
OSM_MAX_RETRIES=3
OSM_RATE_LIMIT=1.0

# OSRM routing settings
OSRM_API_URL=https://router.project-osrm.org
OSRM_PROFILE_CAR=car
OSRM_PROFILE_TRANSIT=foot

# Cache settings
CACHE_TTL_SECONDS=2592000
CACHE_MAX_SIZE=1000

# Geocoding service specific timeouts and settings
GEOCODING_REQUEST_TIMEOUT=10
GEOCODING_RETRY_DELAY_BASE=2
GEOCODING_RATE_LIMIT_SLEEP=1
GEOCODING_COORDINATE_PRECISION=6

# ===================================
# PATIENT SERVICE CONFIGURATION
# ===================================

# local storage of imported files
PATIENT_IMPORT_LOCAL_PATH=/data/patient_imports/development
PATIENT_IMPORT_CHECK_INTERVAL_SECONDS=300

# ===================================
# THERAPIST SERVICE CONFIGURATION
# ===================================

THERAPIST_IMPORT_CHECK_INTERVAL_SECONDS=86400
THERAPIST_IMPORT_ENABLED=true

# PDF Storage Configuration
THERAPIST_PDF_STORAGE_PATH=/data/therapist_pdfs/development

# ===================================
# MATCHING SERVICE CONFIGURATION
# ===================================

# Anfrage (Inquiry) settings
MAX_ANFRAGE_SIZE=6
MIN_ANFRAGE_SIZE=1
PLZ_MATCH_DIGITS=2
DEFAULT_MAX_DISTANCE_KM=25

# Follow-up and communication settings
FOLLOW_UP_THRESHOLD_DAYS=14
DEFAULT_PHONE_CALL_TIME=12:00

# Matching algorithm specific settings
MATCHING_FALLBACK_TIME_MORNING=10:00
MATCHING_FALLBACK_TIME_AFTERNOON=14:00
MATCHING_CALL_DURATION_SHORT=5
MATCHING_CALL_DURATION_STANDARD=10
MATCHING_TOMORROW_OFFSET_DAYS=1

# ===================================
# IMPORT SETTINGS FROM INFOMANIAK OBJECT STORAGE
# ===================================

SWIFT_APPLICATION_ID='your_swift_application_id' # ⚠️ MANUAL ENTRY REQUIRED - Set your Swift Application ID
SWIFT_APPLICATION_SECRET='your_swift_application_secret' # ⚠️ MANUAL ENTRY REQUIRED - Set your Swift Application Secret
SWIFT_STORAGE_URL='https://s3.pub2.infomaniak.cloud/object/v1/AUTH_your_project_id' # ⚠️ MANUAL ENTRY REQUIRED - Set your Swift Storage URL with project ID
HMAC_SECRET_KEY='your_hmac_secret_key' # ⚠️ MANUAL ENTRY REQUIRED - Set your HMAC Secret Key

# ===================================
# SECURITY CONFIGURATION
# ===================================

# Security keys (generate strong random values for production)
SECRET_KEY=your-secret-key-here-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-here-change-in-production

# Session configuration
SESSION_LIFETIME_MINUTES=1440
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true

# ===================================
# FEATURE FLAGS
# ===================================

ENABLE_EMAIL_SENDING=true
ENABLE_PHONE_SCHEDULING=true

# ===================================
# RATE LIMITING
# ===================================

API_RATE_LIMIT_PER_MINUTE=60
API_RATE_LIMIT_PER_HOUR=1000

# ===================================
# DEVELOPMENT TOOLS
# ===================================
# Disable all in production

ENABLE_DEBUG_TOOLBAR=true
ENABLE_PROFILING=false
SQL_ECHO=false

# ===================================
# MONITORING AND LOGGING
# ===================================

SENTRY_DSN=
ENABLE_PERFORMANCE_MONITORING=false

# ===================================
# FRONTEND CONFIGURATION
# ===================================
# For reference by backend services if needed

REACT_APP_USE_MOCK_DATA=false
REACT_APP_PATIENT_API=http://localhost:8001/api
REACT_APP_THERAPIST_API=http://localhost:8002/api
REACT_APP_MATCHING_API=http://localhost:8003/api
REACT_APP_COMMUNICATION_API=http://localhost:8004/api
REACT_APP_GEOCODING_API=http://localhost:8005/api

# ===================================
# ENVIRONMENT-SPECIFIC EXAMPLES
# ===================================

# Example for Development:
# FLASK_ENV=development
# DB_NAME=therapy_platform
# SERVICE_ENV_SUFFIX=
# PATIENT_SERVICE_PORT=8001
# GCS_IMPORT_BUCKET=dev-patient-import
# DB_EXTERNAL_PORT=5432
# PGBOUNCER_EXTERNAL_PORT=6432

# Example for Test:
# FLASK_ENV=test
# DB_NAME=curavani_test
# SERVICE_ENV_SUFFIX=-test
# PATIENT_SERVICE_PORT=8011
# GCS_IMPORT_BUCKET=test-patient-import
# DB_EXTERNAL_PORT=5433
# PGBOUNCER_EXTERNAL_PORT=6433

# Example for Production:
# FLASK_ENV=production
# DB_NAME=curavani_prod
# SERVICE_ENV_SUFFIX=-prod
# PATIENT_SERVICE_PORT=8021
# GCS_IMPORT_BUCKET=curavani-production-data-transfer
# DB_EXTERNAL_PORT=5434
# PGBOUNCER_EXTERNAL_PORT=6434